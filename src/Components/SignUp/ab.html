<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* Modal container covers the full viewport with a translucent background */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
}

/* Modal content box */
.modal-content {
  background: #fff;
  margin: 10% auto;
  padding: 20px;
  width: 80%;
  max-width: 600px;
  position: relative;
}

/* Close button */
.close {
  position: absolute;
  top: 10px;
  right: 20px;
  cursor: pointer;
  font-size: 24px;
}

    </style>
</head>
<body>
   <!-- Button to open modal -->
<button id="openModalBtn">Open Modal</button>

<!-- Modal container -->
<div id="myModal" class="modal" style="display: none;">
  <div class="modal-content">
    <!-- Button to close modal -->
    <span id="closeModalBtn" class="close">&times;</span>
    
    <!-- Your responsive lazy loaded picture -->

    <picture class="lozad">
        <!-- For larger screens -->
        <source data-srcset="https://www.idfcfirstbank.com/content/dam/idfcfirstbank/images/homepage-redesign/Desktop-WOW-Banner.png" media="(min-width: 769px)">
        <!-- For screens up to 768px -->
        <source data-srcset="https://www.idfcfirstbank.com/content/dam/idfcfirstbank/images/homepage-redesign/KV-Desktop-Frame-1.png" media="(max-width: 768px)">
        <!-- Fallback image -->
        <img data-src="fallback.jpg" alt="Responsive lazy loaded image">
      </picture>
  </div>
</div>

    <!-- Include lozad from a CDN -->
<!-- Include lozad from a CDN -->
<script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>
<script>
  // Initialize lozad with a custom load callback if needed
  const observer = lozad('.lozad', {
    load: function(el) {
      if (el.tagName.toLowerCase() === 'picture') {
        // Update each <source> element in the picture
        el.querySelectorAll('source').forEach(source => {
          const srcset = source.getAttribute('data-srcset');
          if (srcset) {
            source.setAttribute('srcset', srcset);
          }
        });
        // Update the <img> inside the picture
        const img = el.querySelector('img');
        if (img) {
          const dataSrc = img.getAttribute('data-src');
          if (dataSrc) {
            img.setAttribute('src', dataSrc);
          }
        }
      } else if (el.tagName.toLowerCase() === 'img') {
        // For standalone img elements
        const dataSrc = el.getAttribute('data-src');
        const dataSrcset = el.getAttribute('data-srcset');
        if (dataSrc) {
          el.setAttribute('src', dataSrc);
        }
        if (dataSrcset) {
          el.setAttribute('srcset', dataSrcset);
        }
      }
      el.classList.add('loaded');
    }
  });
  
  // Initially observe all elements with class 'lozad'
  observer.observe();

  // Modal handling code
  document.getElementById('openModalBtn').addEventListener('click', function() {
    // Show the modal
    const modal = document.getElementById('myModal');
    modal.style.display = 'block';
    
    // Trigger lozad to load elements within the modal
    // (Assuming the picture is not in the viewport while hidden, we manually trigger it)
    const lozadEl = modal.querySelector('.lozad');
    observer.triggerLoad(lozadEl);
  });

  document.getElementById('closeModalBtn').addEventListener('click', function() {
    // Hide the modal
    document.getElementById('myModal').style.display = 'none';
  });
</script>


</script>

</body>
</html>
